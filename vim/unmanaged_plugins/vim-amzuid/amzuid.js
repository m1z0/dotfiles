!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.amzid=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(b){var c=a("./Bignary");b.Bignary=c;var d=function(){"use strict";function a(a){var b=a.substring(0,1),c=a.substring(1);if(b!==p)throw Error('Token tag "'+b+'" does not match expected token tag: "'+p+'"');var d=l(c,36),e=j(d,q),g=e.and(s),h=e.binaryShiftRight(20);return f(a,h,g),h}function b(a){var b=a.substring(0,1),d=a.substring(1);if(b!==p)throw Error('Token tag "'+b+'" does not match expected token tag: "'+p+'" (from encryptedId '+a+")");var e=new c(d.substring(0,o),10),g=l(d.substring(o),36),h=j(g,q);return f(a,h,e),h}function d(a){if(a.equals(0))return"0";var b=g(a),c=a.binaryShiftLeft(20).add(b),d=h(c);return p+d}function e(a){if(a.equals(0))return"0";for(var b=g(a),c=b.toDecimalString();c.length<o;)c="0"+c;var d=h(a),e=c+d;return p+e}function f(a,b,c){var d=g(b);if(!c.equals(d))throw Error("Checksum didn't match: id="+b.toString())}function g(a){var b,d=new c(0);for(b=0;4>b;b++)d=d.add(a.and(s)),a=a.binaryShiftRight(16);return d=d.xor("11000010111110010011",2),d.and(s)}function h(a){var b=i(a,q);return k(b,36)}function i(a,b){for(var d,e,f=a.and(r),g=a.binaryShiftRight(32),h=new c("0",2),i=new c("10011110001101110111100110111001",2),j=32;j-->0;)h=h.add(i).and(r),d=g.binaryShiftLeft(4).add(b[0],2).and(r),d=d.xor(g.add(h)),d=d.xor(g.binaryShiftRight(5).add(b[1],2)),f=f.add(d).and(r),e=f.binaryShiftLeft(4).add(b[2],2),e=e.xor(f.add(h)),e=e.xor(f.binaryShiftRight(5).add(b[3],2)),g=g.add(e).and(r);return new c(g).binaryShiftLeft(32).add(f)}function j(a,b){var d,e,f=a.and(r),g=a.binaryShiftRight(32),h=32,i=new c(0),j=new c("10011110001101110111100110111001",2);for(i=j.binaryShiftLeft(5);h-->0;)e=f.binaryShiftLeft(4).add(b[2],2),e=e.xor(f.add(i)),e=e.xor(f.binaryShiftRight(5).add(b[3],2)),g=g.subtractWithOverflow(e,32),d=g.binaryShiftLeft(4).add(b[0],2).and(r),d=d.xor(g.add(i)),d=d.xor(g.binaryShiftRight(5).add(b[1],2)),f=f.subtractWithOverflow(d,32),i=i.subtract(j);return new c(g).binaryShiftLeft(32).add(f)}function k(a,b){var c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",d="";if(b>36||2>b)return 0;for(;a.greaterThan("0",2);)d=c.charAt(a.mod(36).toNumber())+d,a=a.integerDivide(36);return d}function l(a,b){var d,e,f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",g=new c(0);if(b>36||2>b)return 0;for(d=0;d<a.length;d++){if(e=f.indexOf(a.charAt(d)),-1===e||e>b)throw Error("Cannot convert base"+b+" to number, encountered character outside of range: "+a.charAt(d));g=g.multiply(b),g=g.add(e)}return g}var m=new c("8796093022208"),n=14,o=7,p="A",q=["1111010011000010110110101000001","1100011001011100110111001101111","1000010001000000110110101101111","1110011011010110110111101101111"],r=new c("11111111111111111111111111111111",2),s=new c("11111111111111111111",2);return{encrypt:function(a){var b=new c(a);if(b.toBinaryString().length>64)throw Error("Cannot encrypt a number larger than 64 bits.");if(b.isNegative())throw Error("Cannot encrypt a negative number");return b.lessThan(m)?d(b):e(b)},decrypt:function(c){if("string"!=typeof c&&!(c instanceof String))throw Error('Cannot decrypt anything except Strings (got type "'+typeof c+'"');return c.length>n?b(c).toString():a(c).toString()}}};b.AmzId=d()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Bignary":2}],2:[function(a,b,c){function d(a,b){"use strict";function c(a){var b,c,d="",e=!1;if(!/^-?[a-f0-9]+$/i.test(a))throw Error('Unable to instantiate Bignary object from hexadecimal; value contains non-hexadecimal characters (A-Z, 0-9): "'+a+'"');for(s(a)&&(a=g(a),e=!0),b=0;b<a.length;b++){for(c=parseInt(a.charAt(b),16).toString(2);c.length<4;)c="0"+c;d+=c}return d=h(d),e&&(d="-"+d),d}function e(a){var b,c="",d=!1;for(s(a)&&(a=g(a),d=!0),b=0;b<a.length;b++)c=i(c+"0",c+"000",2),c=i(c,parseInt(a.charAt(b)).toString(2),2);return c=h(c),d&&(c="-"+c),c}function f(a,b,c){var d,e,f,h,i,j="",k=!1;if(b>c)throw Error("baseConvert cannot convert from higher bases to lower bases");for("number"==typeof a&&(a=a.toString(b)),s(a)&&(a=g(a),k=!0),d=a;!/^0*$/.test(d);){for(e=0,f="",i=0;i<d.length;i++)h=parseInt(d.charAt(i),b),e=b*e+h,f+=Math.floor(e/c).toString(c),e%=c;d=f,j=e.toString(c)+j}return""===j&&(j="0"),k===!0&&"0"!==j&&(j="-"+j),j}function g(a){return a.replace(/^-/,"")}function h(a){var b=a.replace(/^0*/,"");return""===b&&(b="0"),b}function i(a,b,c){c=c||2;var d,e,f,i,k=0,l="",m=!1,n=!1;if(s(a)&&(a=g(a),m=!0),s(b)&&(b=g(b),n=!0),m&&!n)return j(b,a,c);if(!m&&n)return j(a,b,c);for(d=0;d<Math.max(a.length,b.length)||k>0;)e=parseInt(a.substring(a.length-d-1,a.length-d)||"0",c),f=parseInt(b.substring(b.length-d-1,b.length-d)||"0",c),i=e+f+k,l=(i%c).toString(c)+l,k=Math.floor(i/c),d++;return l=h(l),m&&n&&(l="-"+l),l}function j(a,b,c){c=c||2;var d,e,f,j,k="",m=!1,n=!1,o=0;if(s(a)&&(a=g(a),m=!0),s(b)&&(b=g(b),n=!0),m&&!n)return"-"+i(a,b,c);if(!m&&n)return i(a,b,c);for(d=0;d<Math.max(a.length,b.length);)e=parseInt(a.substring(a.length-d-1,a.length-d)||"0",c),f=parseInt(b.substring(b.length-d-1,b.length-d)||"0",c),e-=o,f>e?(e+=c,o=1):o=0,j=e-f,k=Math.abs(j%c).toString(c)+k,d++;return k=0!==o?"-"+l(k,c):h(k)}function k(a,b,c){if("<"===t(a,b)){var d=j(b,a,2);return k("100000000000000000000000000000000",d,c)}return j(a,b,2)}function l(a,b,c){var d,e="";for(s(a)&&(a=g(a));void 0!==c&&a.length<c;)a="0"+a;for(d=0;d<a.length;d++)e+=(b-1-parseInt(a.charAt(d),b)).toString(b);return e=i(e,"1",b),e=h(e)}function m(a,b){var c,d,e,f="";if(s(a)||s(b))throw Error("Bignary can't AND negative numbers (yet)");for(c=0;c<Math.max(a.length,b.length);c++)d=a.substring(a.length-c-1,a.length-c)||"0",e=b.substring(b.length-c-1,b.length-c)||"0",f="1"===d&&"1"===e?"1"+f:"0"+f;return h(f)}function n(a,b){var c,d,e,f="";if(s(a)||s(b))throw Error("Bignary can't OR negative numbers (yet)");for(c=0;c<Math.max(a.length,b.length);c++)d=a.substring(a.length-c-1,a.length-c)||"0",e=b.substring(b.length-c-1,b.length-c)||"0",f="1"===d||"1"===e?"1"+f:"0"+f;return h(f)}function o(a,b){var c,d,e,f="";if(s(a)||s(b))throw Error("Bignary can't XOR negative numbers (yet)");for(c=0;c<Math.max(a.length,b.length);c++)d=a.substring(a.length-c-1,a.length-c)||"0",e=b.substring(b.length-c-1,b.length-c)||"0",f=d!==e?"1"+f:"0"+f;return h(f)}function p(a,b){for(var c=[],d=0;b>d;d++)c.push("0");return h(a+""+c.join(""))}function q(a,b){return b>=a.length?"0":a.substring(0,a.length-b)}function r(a,b){var f;if(a instanceof d)f=a.toBinaryString();else if("string"==typeof a||a instanceof String){if(/\./.test(a))throw Error("Bignary Decimals are not supported (yet)");if(10!==b&&void 0!==b||!/^-?[0-9]+$/.test(a))if(2!==b&&void 0!==b||!/^-?[01]+$/.test(a)){if(16!==b&&void 0!==b||!/^-?[0-9a-f]+$/i.test(a))throw Error('Unable to create Bignary from value "'+a+'" with base "'+b+'"');f=c(a)}else f=h(a);else f=e(a)}else if("number"==typeof a){if(a%1!==0)throw Error("Bignary Decimals are not supported (yet)");if(a>9007199254740992||-9007199254740992>a)throw Error("Unable to accept number larger than +/- 2^53; undefined precision");f=a.toString(2)}else{if(void 0!==a)throw Error('Unable to get numeric value from "'+a+'"');f="0"}return f}function s(a){return"-"===a.charAt(0)}function t(a,b){var c,d,e,f,g=s(a),h=s(b),i=!1;if(g&&!h)return"<";if(!g&&h)return">";if(g&&h&&(i=!0),a.length!==b.length)return f=a.length>b.length,f?i?"<":">":i?">":"<";for(c=0;c<a.length;c++){if(d=a.charAt(c),e=b.charAt(c),"1"===d&&"1"!==e)return i?"<":">";if("1"!==d&&"1"===e)return i?">":"<"}return"="}function u(a,b){var c,d="0",e="0",h=s(a),i=s(b);if("0"===b)throw Error("Division by zero ("+f(a,2,10)+" / 0)");if("1"===b)return[v,"0"];if(b===a)return["1","0"];if(g(b)===g(a))return["-1","0"];if("<"===t(a,b))return["0",a];for(a=g(a),b=g(b),c=0;c<a.length;c++)e=p(e,1),e=n(e,a.charAt(c)),"<"!==t(e,b)&&(e=j(e,b),d=n(d,p("1",a.length-1-c)));return h!==i&&(d="-"+d),[d,e]}if(!(this instanceof d))return new d(a,b);var v=r(a,b);this.toBinaryString=function(){return v},this.toDecimalString=function(){return f(v,2,10)},this.toHexString=function(){return f(v,2,16)},this.toNumber=function(){if(v.replace(/^-/,"").length>53)throw Error("Cannot convert to Javascript number; value ("+this.toDecimalString()+") has more than 53 bits of precision");return parseInt(v,2)},this.isNegative=function(){return s(v)},this.isZero=function(){return"0"===v},this.abs=function(){return new d(g(v),2)},this.equals=function(a,b){var c=r(a,b);return v===c},this.greaterThan=function(a,b){var c=r(a,b),d=t(v,c);return">"===d},this.greaterThanOrEqualTo=function(a,b){var c=r(a,b),d=t(v,c);return">"===d||"="===d},this.lessThan=function(a,b){var c=r(a,b),d=t(v,c);return"<"===d},this.lessThanOrEqualTo=function(a,b){var c=r(a,b),d=t(v,c);return"<"===d||"="===d},this.add=function(a,b){var c=r(a,b);return new d(i(v,c,2),2)},this.subtract=function(a,b){var c=r(a,b);return new d(j(v,c,2),2)},this.subtractWithOverflow=function(a,b,c){var e=r(a,c);return new d(k(v,e,b),2)},this.multiply=function(a,b){var c,e,f=v,h=r(a,b),i=s(f),j=s(h),k=new d(0);for(f=g(f),h=g(h),c=0;c<h.length;c++)"1"===h.charAt(c)&&(e=p(f,h.length-c-1),k=k.add(e,2));return i!==j&&(k=new d("-"+k.toBinaryString(),2)),k},this.pow=function(a,b){if(a=parseInt(a,b||10),0>a)throw Error("Bignary can't take the power to negative exponents (yet)");if(0===a)return new d(1);if(1===a)return new d(v,2);var c,e=new d(v,2);for(c=1;a>c;c++)e=e.multiply(v,2);return e},this.integerDivide=function(a,b){var c=r(a,b);return new d(u(v,c)[0],2)},this.mod=function(a,b){var c=r(a,b);return new d(u(v,c)[1],2)},this.and=function(a,b){var c=r(a,b);return new d(m(v,c),2)},this.or=function(a,b){var c=r(a,b);return new d(n(v,c),2)},this.xor=function(a,b){var c=r(a,b);return new d(o(v,c),2)},this.binaryShiftRight=function(a){return new d(q(v,a),2)},this.binaryShiftLeft=function(a){return new d(p(v,a),2)},this.complement=function(a){return new d(l(v,2,a))},this.toString=function(a){switch(a=a||10){case 2:return this.toBinaryString();case 10:return this.toDecimalString();case 16:return this.toHexString();default:throw Error("Can't convert Bignary to base "+a)}}}b.exports=d},{}]},{},[1])(1)});
